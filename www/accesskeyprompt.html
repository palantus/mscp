<!doctype html>
<html>
<head>
<meta charset="utf-8" />
	<title>Enter access key</title>
</head>
<body>

<p>You do not have access to this site. Please enter an access key:</p>
<input placeholder="Access key" id="accessKey" style="width: 300px;"></input>
<button id="ok">Submit</button>

<script>
function init(){
  document.getElementById("accessKey").focus();
  document.getElementById("ok").addEventListener("click", function(e) {
    let accessKey = document.getElementById("accessKey").value;
    let path = window.location.pathname;
    let url = path.startsWith("/mscp") ? "/mscpapi/get-dependencies"
            : path.startsWith("/api") ? '/api'
            : "/";
    url += "?accessKey=" + accessKey;
    fetch(url, {
      method: 'get',
      credentials: 'include'
    }).then(() => location.reload());
  });
}
document.addEventListener("DOMContentLoaded", init);
</script>

</body>
</html>
